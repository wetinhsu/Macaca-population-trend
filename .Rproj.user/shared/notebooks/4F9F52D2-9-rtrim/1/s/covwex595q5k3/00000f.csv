"0","weight <- "
"0","  M.data %>% "
"0","  mutate(SP = paste0(Site_N,""-"",Point)) %>% "
"0","  dplyr::select(Year, SP, Survey, Region) %>% "
"0","  unique %>%"
"0","  reshape2::dcast(SP + Region ~ Year, length) %>% "
"0","  reshape2::melt(id = 1:2, variable.name = ""Year"", value.name = ""point_n"") %>% "
"0","  group_by(Region) %>% "
"0","  mutate(SP_n = SP %>% unique %>% length())%>% "
"0","  left_join(weight.o)%>% "
"0","  mutate(point_n = ifelse(point_n %in% 0, 1, point_n) ) %>% "
"0","  mutate(weight = 1000* prob_Area / SP_n /point_n) %>% "
"0","  dplyr::select(Year, SP, Region, weight)"
"2","Using Region as value column: use value.var to override.
"
"2","Joining with `by = join_by(Region)`"
"0","#weight := prob_Area / site_n /調查次數  "
"0"," "
"0",""
